var data_store=[],key;$(function(){var b=$(".pm_menu").find("a");b.each(function(){$(this).click(function(){b.removeClass("on");$(this).addClass("on");var c=$(this).attr("rel");var d=c+"_"+key;if(key==undefined){key="coins"}if(data_store[c+"_"+key]==undefined){getData(c,key)}else{setList(data_store[d])}})});var a=$("ul li");a.each(function(){$(this).click(function(){b.eq(0).addClass("on");b.eq(1).removeClass("on");a.removeClass("on");$(this).addClass("on");var c="global";key=$(this).attr("rel");var d=c+"_"+key;if(data_store[d]==undefined){getData(c,key)}else{setList(data_store[d])}})})});function getData(b,a){$.post("/rank/getData/"+b+"/"+a,"csrf_token="+token,function(d){var c=$.jsonDecode(d);var e=b+"_"+a;data_store[e]=c;if(c.error_code==0){setList(data_store[e])}})}function setList(c){var a=$(".fsb_m_rt").find("table").find("tr");a.each(function(){if($(this).attr("rel")=="render"){$(this).remove()}});var b="";$.each(c.data,function(d,e){if(d%2==0){var f='<td class="dark_bg">'}else{var f="<td>"}b+='<tr rel="render">';b+=f+e.order+"</td>";if(e.isme==0){b+=f+e.nickname+"</td>"}else{b+=f+'<font color="red">'+e.nickname+"</font></td>"}b+=f+e.area+"</td>";b+=f+e.coins+"</td>";if(key=="coins"){b+=f+e.win_rate+"</td>"}else{b+=f+e[key]+"</td>"}b+="</tr>"});if(key=="coins"){$("#sp").html(rank_keys.win_rate)}else{$("#sp").html(rank_keys[key])}$(".fsb_m_rt").find("table").append(b)};